

inspect=>@"creates unit tests for the [index-of] keyword

creates unit tests to verify that [index-of] works the 
way it should work"


event
  name=>magix.test.index-of
  persist=>false
  inspect=>@"verifies that [index-of] works

creates an [index-of] statement that splits a string 
upon every index of ' ', making sure the result is 
what is expected"
  code
    _data=>howdy world this is cool
    index-of=>[_data].Value
      what=>@" "
    if=>not-equals
      lhs=>[index-of][result].Count
      rhs=>4
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][0].Value
      rhs=>5
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][1].Value
      rhs=>11
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][2].Value
      rhs=>16
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][3].Value
      rhs=>19
      code
        throw=>[index-of] misbehaved


event
  name=>magix.test.index-of-expressions
  persist=>false
  inspect=>@"verifies that [index-of] works with expressions

creates an [index-of] statement that splits a string 
upon every index of ' ', making sure the result is 
what is expected, where the [what] node is an expression, 
pointing to a node, who's value is ' '"
  code
    _what=>@" "
    _data=>howdy world this is cool
    index-of=>[_data].Value
      what=>[_what].Value
    if=>not-equals
      lhs=>[index-of][result].Count
      rhs=>4
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][0].Value
      rhs=>5
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][1].Value
      rhs=>11
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][2].Value
      rhs=>16
      code
        throw=>[index-of] misbehaved
    if=>not-equals
      lhs=>[index-of][result][3].Value
      rhs=>19
      code
        throw=>[index-of] misbehaved

