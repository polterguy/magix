

inspect=>@"creates unit tests to 
test the magix.data namespace"


event
  name=>magix.test.save-load-object-expressions
  persist=>false
  inspect=>@"asserts that [magix.data.save/load] works the 
way it should work, by trying to create an object, save it, 
for then to reload it again"
  code
    _data1
      tmp=>testing
    using=>magix.data
      save
        id=>magix.tests.data-test1
        value=>[_data1]
      load
        id=>magix.tests.data-test1
    if=>not-equals
      lhs=>[using][load][objects][0][tmp].Value
      rhs=>testing
      code
        throw=>@"[magix.data.load/save] didn't behave as expected '
    magix.data.remove
      id=>magix.tests.data-test1
when invoking with an expression in the [value] node"


event
  name=>magix.test.save-load-object-constants
  persist=>false
  inspect=>@"asserts that [magix.data.save/load] works the 
way it should work, by trying to create an object, save it, 
for then to reload it again"
  code
    using=>magix.data
      save
        id=>magix.tests.data-test1
        value
          tmp=>testing
      load
        id=>magix.tests.data-test1
    if=>not-equals
      lhs=>[using][load][objects][0][tmp].Value
      rhs=>testing
      code
        throw=>@"[magix.data.load/save] didn't behave as expected 
when invoking with a constant node in the [value] node"
    magix.data.remove
      id=>magix.tests.data-test1


event
  name=>magix.test.save-load-object-expression-ids
  persist=>false
  inspect=>@"asserts that [magix.data.save/load] works the 
way it should work, by trying to create an object, save it, 
for then to reload it again"
  code
    _id=>magix.tests.data-test2
    using=>magix.data
      save
        id=>[_id].Value
        value
          tmp=>testing
      load
        id=>[_id].Value
    if=>not-equals
      lhs=>[using][load][objects][0][tmp].Value
      rhs=>testing
      code
        throw=>@"[magix.data.load/save] didn't behave as expected 
when invoking with an expression in the [id] node"
    using=>magix.data
      remove
        id=>[_id].Value


